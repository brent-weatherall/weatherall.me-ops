name: Connectivity Smoke Test
on: workflow_dispatch  # Allows you to click "Run" manually in GitHub

jobs:
  ping-home:
    runs-on: [self-hosted, oracle-cloud]  # Targets your new runner
    steps:
      - name: Check Runner Identity
        run: |
          whoami
          ip a

      - name: Test Connection to Proxmox API
        # Replace with your Proxmox LAN IP (e.g., 192.168.1.50)
        # This works because your OPNsense router is advertising the subnet!
        run: |
          curl -v -k https://192.168.1.4:8006/api2/json/version || echo "Failed to reach Proxmox"
